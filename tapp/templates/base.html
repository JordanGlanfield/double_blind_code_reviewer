<!doctype html>
<html lang="en">
<head>
    {% block head %}

    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-colors-highway.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">


    <style>html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}</style>

    <title>
        {% block title%}
        The Template App
        {% endblock %}
    </title>

    {% endblock %}
</head>

<body>

{% block topbar %}
<!--Top bar-->
<div class=" w3-bar w3-black w3-large">
    <button id="openNav" class="w3-bar-item w3-text-light-gray w3-button w3-hover-none w3-hover-text-white" onclick="openSidebar()"><i
            class="fa fa-bars"></i></button>
    <span id="page-title" class="w3-bar-item"></span>
    <div class="w3-dropdown-hover w3-right w3-margin-right">
        <button onclick="toggleDropdown()" class="w3-btn w3-hover-black w3-text-light-gray">{{ current_user.firstname }}</button>
        <div id="dropdown" class="w3-dropdown-content w3-bar-block w3-card-4 w3-margin-right w3-light-gray w3-border w3-border-gray" style="right:0;margin-top:1px">
            <a href="{{ url_for('auth.logout') }}" class="w3-bar-item w3-btn w3-hover-none w3-hover-indigo w3-small">Log Out</a>
        </div>
    </div>
</div>
{% endblock %}

<!-- Sidebar/menu -->
<div class="w3-sidebar w3-bar-block w3-animate-left" id="mySidebar" style="z-index:3;display:none">
    <div class="w3-container">
        <h3 style="vertical-align:middle"><strong>Menu</strong></h3>
    </div>
    <hr>
    <div class="w3-bar-block">
        <a href="https://gitlab.doc.ic.ac.uk" target="_blank"
           class="w3-bar-item w3-button w3-padding w3-hover-indigo">
            <i class="fa fa-gitlab fa-fw"></i> GitLab
        </a>
        <a href="https://teaching.doc.ic.ac.uk/labts" target="_blank"
           class="w3-bar-item w3-button w3-padding w3-hover-indigo">
            <i class="fa fa-flask fa-fw"></i> LabTS
        </a>
        <a href="https://cate.doc.ic.ac.uk" target="_blank"
           class="w3-bar-item w3-button w3-padding  w3-hover-indigo">
            <i class="fa fa-users fa-fw"></i> CATe
        </a>
    </div>
    <hr>
    <div class="w3-container w3-bar-item w3-padding">
        <p>Found any bugs?</p>
        <button class="w3-btn w3-teal" onclick="showElement('issue-modal')">
            Let us know <i class="fa fa-comment-o w3-large"></i></button>
    </div>
    <div class="w3-container w3-bar-item w3-margin-bottom">
        <p class="w3-tiny">Created by ip914</p>
    </div>
    <!-- FIGURE OUT WHY THIS IS NEEDED TO ENSURE LAST BAR-ITEM IS SHOWN -->
    <div class="w3-container w3-bar-item">
        <p></p>
    </div>
</div>

<!-- Overlay effect when opening sidebar -->
<div class="w3-overlay w3-animate-opacity" onclick="closeSidebar()" style="cursor:pointer" title="Close menu" id="myOverlay"></div>


<!-- Issue Modal -->
<div id="issue-modal" class="w3-modal">
    <div class="w3-modal-content w3-card-3 w3-animate-top" style="max-width:600px">
        <header class="w3-container w3-indigo">
            <h2>Tracking Issue</h2>
        </header>
        <div class="w3-container">
            <p>
                While we work on more sophisticated ways for you to let us know about any issues (or positive feedback),
                please do contact <em>ip914</em>.
                <br>
                <strong>#nospam</strong>
            </p>
        </div>
        <div class="w3-container w3-light-grey w3-padding">
            <button class="w3-btn w3-block w3-blue-grey w3-ripple w3-padding"
                    onclick="hideElement('issue-modal')">Cancel
            </button>
        </div>
    </div>
</div>


<div id="main">
    <div class="w3-container w3-animate-opacity">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        {% set style = message['style'] %}
        <div class="w3-panel w3-{{ style['bg']}} w3-leftbar w3-border-{{ style['highlight'] }} w3-animate-right w3-display-content">
        <span onclick="this.parentElement.style.display='none'"
              class="w3-button w3-hover-{{ style['highlight'] }} w3-display-topright w3-large">&times;</span>
            {{ message['header'] }}
            {{ message['body'] }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        {% block content %} {% endblock %}
    </div>
</div>

<script charset="utf-8" type="text/javascript" src="{{ url_for('static', filename='js/base.js') }}"></script>
{% block scripts %}{% endblock %}

</body>
</html>
